"use strict";(self["webpackChunkel_table_virtual_scroll"]=self["webpackChunkel_table_virtual_scroll"]||[]).push([[544],{2277:function(e,t,l){l.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("el-table-column",e._g(e._b({attrs:{"class-name":e.isTree?"el-table__row--level":""},scopedSlots:e._u([{key:"header",fn:function(l){return[e._t("header",(function(){return["v-selection"===l.column.type?t("el-checkbox",{attrs:{indeterminate:e.isCheckedImn},on:{change:e.onCheckAllRows},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}}):[e._v(" "+e._s(l.column.label)+" ")]]}),null,l)]}},{key:"default",fn:function(l){return[l.column&&"v-tree"===l.column.type?[t("span",{staticClass:"el-table__indent",style:{paddingLeft:(l.row.$level-1)*e.indent+"px"}}),!1!==l.row.$v_hasChildren?t("div",{staticClass:"el-table__expand-icon",class:l.row.$v_expanded?"el-table__expand-icon--expanded":"",on:{click:function(t){return e.onTreeNodeExpand(l.row)}}},[l.row.$v_loading?t("i",{staticClass:"el-icon-loading"}):t("i",{staticClass:"el-icon-arrow-right"})]):t("span",{staticClass:"el-table__placeholder"})]:e._e(),e._t("default",(function(){return["v-selection"===l.column.type?t("el-checkbox",{attrs:{value:l.row.$v_checked},on:{change:function(t){return e.onCheckRow(l.row,!l.row.$v_checked)}}}):e._e(),"v-radio"===l.column.type?t("el-radio",{attrs:{label:!0,value:e.virtualScroll.curRow===l.row},on:{change:function(t){return e.onRadioChange(l.row)}}},[t("span")]):"v-index"===l.column.type?t("span",[e._v(" "+e._s(e.getIndex(l))+" ")]):[e._v(" "+e._s(l.row[l.column.property])+" ")]]}),null,l)]}}],null,!0)},"el-table-column",e.$attrs,!1),e.$listeners))},i=[],o={name:"el-table-virtual-column",inject:["virtualScroll"],props:{load:{type:Function},indent:{type:Number,default:16}},data(){return{isCheckedAll:!1,isCheckedImn:!1,isTree:!1}},methods:{onCheckAllRows(e){e=!!this.isCheckedImn||e,this.virtualScroll.checkAll(e),this.isCheckedAll=e,this.isCheckedImn=!1},onCheckRow(e,t){this.virtualScroll.checkRow(e,t);const l=this.virtualScroll.data,n=l.filter((e=>!0===e.$v_checked)).length;0===n?(this.isCheckedAll=!1,this.isCheckedImn=!1):n===l.length?(this.isCheckedAll=!0,this.isCheckedImn=!1):(this.isCheckedAll=!1,this.isCheckedImn=!0)},onRadioChange(e){this.virtualScroll.setCurrentRow(e)},getIndex(e){const t=this.virtualScroll.start+e.$index;return"function"===typeof this.$attrs.index?this.$attrs.index(t):t+1},onTreeNodeExpand(e){this.$set(e,"$v_expanded",!e.$v_expanded),e.$v_expanded?this.loadChildNodes(e):this.hideChildNodes(e)},loadChildNodes(e){if(e.$v_loaded){const t=this.virtualScroll.data,l=t.findIndex((t=>t===e));l>-1&&this.virtualScroll.updateData([...t.slice(0,l+1),...e.$v_hideNodes,...t.slice(l+1)])}else this.$set(e,"$v_loading",!0),this.load&&this.load(e,t.bind(this));function t(t){Array.isArray(!t)&&(t=[]),this.$set(e,"$v_loading",!1),this.$set(e,"$v_loaded",!0),this.$set(e,"$v_hasChildren",!!t.length),t.forEach((t=>{t.$level="number"===typeof e.$level?e.$level+1:2}));const l=this.virtualScroll.data,n=l.findIndex((t=>t===e));n>-1&&this.virtualScroll.updateData([...l.slice(0,n+1),...t,...l.slice(n+1)])}},hideChildNodes(e){const t=this.virtualScroll.data,l=t.findIndex((t=>t===e));if(-1===l)return;const n=[];for(let o=l+1;o<t.length;o++){const l=t[o];if((l.$level||1)<=(e.$level||1))break;n.push(l)}this.$set(e,"$v_hideNodes",n);const i=t.filter((e=>!n.includes(e)));this.virtualScroll.updateData(i),this.virtualScroll.update()}},beforeCreate(){const{type:e}=this.$attrs;["index","selection","radio","tree"].includes(e)&&(this.$attrs.type="v-"+e)},created(){const{type:e}=this.$attrs;"expand"===e?this.virtualScroll.isExpandType=!0:"v-tree"===e&&(this.isTree=!0)}},a=o,s=l(3736),r=(0,s.Z)(a,n,i,!1,null,"2a13bf83",null),c=r.exports},1695:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("el-select",{staticStyle:{width:"100px"},model:{value:e.fixed,callback:function(t){e.fixed=t},expression:"fixed"}},[t("el-option",{attrs:{value:void 0,label:"不固定"}}),t("el-option",{attrs:{value:"left",label:"固定左边"}}),t("el-option",{attrs:{value:"right",label:"固定右边"}})],1),e._v("   "),t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"滚动到第几行"},model:{value:e.jumpIndex,callback:function(t){e.jumpIndex=t},expression:"jumpIndex"}},[t("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.scrollToRow(e.jumpIndex)}},slot:"append"},[e._v("滚动"+e._s(e.jumpIndex))])],1),e._v("   数据总数量："),t("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"数据条数"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}})],1),t("virtual-scroll",{ref:"virtualScroll",attrs:{data:e.list,"item-size":62,"key-prop":"id"},on:{change:e.onChange}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.virtualList1,stripe:"","row-key":"id",height:"600"}},[t("virtual-column",{attrs:{type:"selection",width:"60"}}),t("el-table-column",{attrs:{label:"id",prop:"id"}}),t("el-table-column",{attrs:{label:"内容",width:"260",prop:"text"}}),t("el-table-column",{attrs:{label:"内容省略",width:"260",prop:"text","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"详情","min-width":"260"},scopedSlots:e._u([{key:"default",fn:function({row:l}){return[t("el-button",{attrs:{type:"text"},on:{click:function(e){l.show=!l.show}}},[e._v(e._s(l.show?"隐藏":"显示"))]),l.show?t("div",[e._v(e._s(l.text2))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"一级表头"}},[t("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}}),t("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}}),t("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}})],1),t("el-table-column",{attrs:{label:"操作",fixed:e.fixed,width:"260"},scopedSlots:e._u([{key:"default",fn:function({row:l}){return[e._v(" "+e._s(l.id)+" "),t("el-button",{on:{click:function(t){return e.onDel(l)}}},[e._v("删除")]),t("el-button",{on:{click:function(t){return e.onEdit(l)}}},[e._v("编辑")])]}}])}),t("div",{attrs:{slot:"append"},slot:"append"},[t("el-divider",[e._v("到底了~")])],1)],1)],1),t("b",[e._v("行数: "+e._s(e.virtualList1.length))])],1)},i=[],o=l(5677),a=l(2277),s=l(9879),r={components:{VirtualScroll:o.Z,VirtualColumn:a.Z},data(){return{count:2e3,fixed:void 0,jumpIndex:1999,loading:!1,show:!1,list:[],virtualList1:[],isCheckedAll:!1,isCheckedImn:!1}},methods:{fetchData(){this.loading=!0,this.list=[],setTimeout((()=>{this.list=(0,s.c)(0,this.count),this.loading=!1}),1e3)},getRandomContent(){const e=["这是一条测试数据","君不见黄河之水天上来，奔流到海不复回。","十年生死两茫茫","寻寻觅觅，冷冷清清，凄凄惨惨戚戚。","桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花卖酒钱。","明月几时有，把酒问青天。","槛菊愁烟兰泣露，罗幕轻寒，","寒蝉凄切，对长亭晚，骤雨初歇。都门帐饮无绪，留恋处，兰舟催发。执手相看泪眼，竟无语凝噎。念去去，千里烟波，暮霭沉沉楚天阔。多情自古伤离别，更那堪冷落清秋节！今宵酒醒何处？杨柳岸，晓风残月。此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？","红豆生南国，春来发几枝。","黄鹂"],t=Math.floor(10*Math.random());return e[t]},scrollToRow(e){this.$refs.virtualScroll.scrollTo(e)},onChange(e){console.log("onChange"),this.virtualList1=e},onDel(e){const t=this.list.findIndex((t=>t===e));t>-1&&this.list.splice(t,1)},onEdit(e){e.text=e.text+"__编辑"}},watch:{count(){this.$refs.virtualScroll?.reset?.(),this.fetchData()}},created(){this.fetchData()}},c=r,d=l(3736),u=(0,d.Z)(c,n,i,!1,null,"06bea163",null),h=u.exports},9879:function(e,t,l){function n(e,t){const l=[];for(let n=0;n<t;n++){const t=o(),a=o();l.push({id:e++,index:n,text:t,text2:a,show:!1,checked:!1,date:(new Date).toLocaleString(),name:"王小虎",province:"上海",city:"普陀区",address:"上海市普陀区金沙江路 1518 弄",zip:200333,category:"江浙小吃、小吃零食",desc:"荷兰优质淡奶，奶香浓而不腻",shop:"王小虎夫妻店",shopId:"10333",count:i(0,1e3)})}return l}function i(e,t){return Math.floor(Math.random()*(t-e))+e}function o(){const e=["这是一条测试数据","君不见黄河之水天上来，奔流到海不复回。","十年生死两茫茫","寻寻觅觅，冷冷清清，凄凄惨惨戚戚。","桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花卖酒钱。","明月几时有，把酒问青天。","槛菊愁烟兰泣露，罗幕轻寒，","寒蝉凄切，对长亭晚，骤雨初歇。都门帐饮无绪，留恋处，兰舟催发。执手相看泪眼，竟无语凝噎。念去去，千里烟波，暮霭沉沉楚天阔。多情自古伤离别，更那堪冷落清秋节！今宵酒醒何处？杨柳岸，晓风残月。此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？","红豆生南国，春来发几枝。","黄鹂"],t=Math.floor(10*Math.random());return e[t]}l.d(t,{c:function(){return n}})}}]);
//# sourceMappingURL=544.c16eb29c.js.map