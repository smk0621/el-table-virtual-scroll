"use strict";(self["webpackChunkel_table_virtual_scroll"]=self["webpackChunkel_table_virtual_scroll"]||[]).push([[765],{2277:function(e,t,l){l.d(t,{Z:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("el-table-column",e._g(e._b({attrs:{"class-name":e.isTree?"el-table__row--level":""},scopedSlots:e._u([{key:"header",fn:function(l){return[e._t("header",(function(){return["v-selection"===l.column.type?t("el-checkbox",{attrs:{indeterminate:e.isCheckedImn},on:{change:e.onCheckAllRows},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}}):[e._v(" "+e._s(l.column.label)+" ")]]}),null,l)]}},{key:"default",fn:function(l){return[l.column&&"v-tree"===l.column.type?[t("span",{staticClass:"el-table__indent",style:{paddingLeft:(l.row.$level-1)*e.indent+"px"}}),!1!==l.row.$v_hasChildren?t("div",{staticClass:"el-table__expand-icon",class:l.row.$v_expanded?"el-table__expand-icon--expanded":"",on:{click:function(t){return e.onTreeNodeExpand(l.row)}}},[l.row.$v_loading?t("i",{staticClass:"el-icon-loading"}):t("i",{staticClass:"el-icon-arrow-right"})]):t("span",{staticClass:"el-table__placeholder"})]:e._e(),e._t("default",(function(){return["v-selection"===l.column.type?t("el-checkbox",{attrs:{value:l.row.$v_checked},on:{change:function(t){return e.onCheckRow(l.row,!l.row.$v_checked)}}}):e._e(),"v-radio"===l.column.type?t("el-radio",{attrs:{label:!0,value:e.virtualScroll.curRow===l.row},on:{change:function(t){return e.onRadioChange(l.row)}}},[t("span")]):"v-index"===l.column.type?t("span",[e._v(" "+e._s(e.getIndex(l))+" ")]):[e._v(" "+e._s(l.row[l.column.property])+" ")]]}),null,l)]}}],null,!0)},"el-table-column",e.$attrs,!1),e.$listeners))},i=[],a={name:"el-table-virtual-column",inject:["virtualScroll"],props:{load:{type:Function},indent:{type:Number,default:16}},data(){return{isCheckedAll:!1,isCheckedImn:!1,isTree:!1}},methods:{onCheckAllRows(e){e=!!this.isCheckedImn||e,this.virtualScroll.checkAll(e),this.isCheckedAll=e,this.isCheckedImn=!1},onCheckRow(e,t){this.virtualScroll.checkRow(e,t);const l=this.virtualScroll.data,n=l.filter((e=>!0===e.$v_checked)).length;0===n?(this.isCheckedAll=!1,this.isCheckedImn=!1):n===l.length?(this.isCheckedAll=!0,this.isCheckedImn=!1):(this.isCheckedAll=!1,this.isCheckedImn=!0)},onRadioChange(e){this.virtualScroll.setCurrentRow(e)},getIndex(e){const t=this.virtualScroll.start+e.$index;return"function"===typeof this.$attrs.index?this.$attrs.index(t):t+1},onTreeNodeExpand(e){this.$set(e,"$v_expanded",!e.$v_expanded),e.$v_expanded?this.loadChildNodes(e):this.hideChildNodes(e)},loadChildNodes(e){if(e.$v_loaded){const t=this.virtualScroll.data,l=t.findIndex((t=>t===e));l>-1&&this.virtualScroll.updateData([...t.slice(0,l+1),...e.$v_hideNodes,...t.slice(l+1)])}else this.$set(e,"$v_loading",!0),this.load&&this.load(e,t.bind(this));function t(t){Array.isArray(!t)&&(t=[]),this.$set(e,"$v_loading",!1),this.$set(e,"$v_loaded",!0),this.$set(e,"$v_hasChildren",!!t.length),t.forEach((t=>{t.$level="number"===typeof e.$level?e.$level+1:2}));const l=this.virtualScroll.data,n=l.findIndex((t=>t===e));n>-1&&this.virtualScroll.updateData([...l.slice(0,n+1),...t,...l.slice(n+1)])}},hideChildNodes(e){const t=this.virtualScroll.data,l=t.findIndex((t=>t===e));if(-1===l)return;const n=[];for(let a=l+1;a<t.length;a++){const l=t[a];if((l.$level||1)<=(e.$level||1))break;n.push(l)}this.$set(e,"$v_hideNodes",n);const i=t.filter((e=>!n.includes(e)));this.virtualScroll.updateData(i),this.virtualScroll.update()}},beforeCreate(){const{type:e}=this.$attrs;["index","selection","radio","tree"].includes(e)&&(this.$attrs.type="v-"+e)},created(){const{type:e}=this.$attrs;"expand"===e?this.virtualScroll.isExpandType=!0:"v-tree"===e&&(this.isTree=!0)}},s=a,o=l(3736),r=(0,o.Z)(s,n,i,!1,null,"2a13bf83",null),d=r.exports},1775:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var n=function(){var e=this,t=e._self._c;return t("div",[t("virtual-scroll",{ref:"virtualScroll",attrs:{data:e.list,"item-size":62,"key-prop":"id"},on:{"update:data":function(t){e.list=t},change:t=>e.tableData=t}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"500px",border:"","row-key":"id"}},[t("virtual-column",{attrs:{label:"id",prop:"id",type:"tree",load:e.onload}}),t("el-table-column",{attrs:{label:"内容",prop:"text"}}),t("el-table-column",{attrs:{label:"内容省略",prop:"text","show-overflow-tooltip":""}})],1)],1)],1)},i=[],a=l(5677),s=l(2277),o={components:{VirtualScroll:a.Z,VirtualColumn:s.Z},data(){return{loading:!1,list:[],tableData:[]}},methods:{fetchData(){this.loading=!0,this.list=[],setTimeout((()=>{this.list=[];for(let e=1;e<2e3;e++){const t=this.getRandomContent(),l=this.getRandomContent();this.list.push({id:e,show:!1,text:t,text2:l,hasChildren:!0})}this.loading=!1}),1e3)},getRandomContent(){const e=["这是一条测试数据","君不见黄河之水天上来，奔流到海不复回。","十年生死两茫茫","寻寻觅觅，冷冷清清，凄凄惨惨戚戚。","桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花卖酒钱。","明月几时有，把酒问青天。","槛菊愁烟兰泣露，罗幕轻寒，","寒蝉凄切，对长亭晚，骤雨初歇。都门帐饮无绪，留恋处，兰舟催发。执手相看泪眼，竟无语凝噎。念去去，千里烟波，暮霭沉沉楚天阔。多情自古伤离别，更那堪冷落清秋节！今宵酒醒何处？杨柳岸，晓风残月。此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？","红豆生南国，春来发几枝。","黄鹂"],t=Math.floor(10*Math.random());return e[t]},onload(e,t){this.count||(this.count=3e3),setTimeout((()=>{if(Math.random()>.5)return void t([]);const e=[];for(let t=0;t<10;t++)e.push({id:this.count++,show:!1,text:this.getRandomContent(),text2:this.getRandomContent()});t(e)}),1e3)}},created(){this.fetchData()}},r=o,d=l(3736),c=(0,d.Z)(r,n,i,!1,null,"974d3f9a",null),h=c.exports}}]);
//# sourceMappingURL=765.97745d35.js.map